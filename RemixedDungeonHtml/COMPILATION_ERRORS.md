# HTML Compilation Errors

This document tracks the compilation errors encountered when trying to build the HTML version of Remixed Dungeon.

## Current Status

As of August 29, 2025, the HTML build fails with 40 compilation errors. The build process successfully runs the code generation steps (codegen and generateBuildConfig) but fails during the Java compilation phase.

## Error Analysis by File

The errors are concentrated in specific files, with GameLoop.java and other files having issues:

1. GameLoop.java - 2 errors (missing methods)
2. WndInstallingMod.java - 1 error (missing abstract method)
3. TextureCache.java - 1 error (missing method)
4. Potion.java - 1 error (missing method)
5. TitleScene.java - 2 errors (type casting issues)
6. WndModInfo.java - 1 error (missing method)
7. WndHatInfo.java - 1 error (functional interface issue)
8. Various other files - 1 error each

## Critical Issues

### 1. Missing BundleHelper Class
```
error: package com.nyrds.generated does not exist
import com.nyrds.generated.BundleHelper;
```
The BundleHelper class is generated by the annotation processor but is not being found during compilation.

### 2. Missing Methods in Platform Classes
Many errors related to missing methods in platform abstraction classes:
- Missing methods in ModdingMode (modException, listResources, getClassicTextRenderingMode, setClassicTextRenderingMode, getBitmapData)
- Missing methods in Preferences (put methods for different types)
- Missing methods in Game (playGames variable, iap variable)
- Missing methods in Sample (enable method)
- Missing methods in MusicManager (enable method)
- Missing methods in FileSystem (various file operations)

### 3. SaveUtils Implementation Issues
The HTML implementation of SaveUtils has been fixed and no longer causes compilation errors. All missing methods and incorrect method signatures have been resolved.

### 4. Graphics/Rendering Issues
- Fixed GL20 interface method signatures (glGetProgramiv, glGetShaderiv) in Program.java and Shader.java
- Missing BitmapData methods (eraseColor, getPixel, makeCircleMask)

### 5. UI/Android-Specific Issues
- Missing Android-specific classes and methods (KeyEvent.KEYCODE_I, AndroidSAF methods)
- Missing PlayGames class
- Missing Ads-related methods
- Missing UI event handling methods
- Missing Keys.Key constants (BEGIN_OF_FRAME, END_OF_FRAME)
- Missing KeyEvent constants (ACTION_DOWN)
- Missing Touchscreen.processEvent method
- Missing AndroidSAF methods (pickDirectoryForModInstall, copyModToAppStorage, mBaseSrcPath)

## Detailed Error Categories

### Bundle/Serialization Issues
- Missing BundleHelper class
- Missing save/load methods in SaveUtils
- Incorrect Bundle method signatures

### Platform Abstraction Issues
- Missing methods in ModdingMode (modException, listResources, getClassicTextRenderingMode, setClassicTextRenderingMode, getBitmapData)
- Missing methods in Preferences (put methods for different types: String, boolean, int, double, float)
- Missing methods in Game (playGames variable, iap variable)
- Missing methods in Sample (enable method)
- Missing methods in MusicManager (enable method)
- Missing methods in FileSystem (various file operations)
- Missing methods in SystemText (updateFontScale)
- Missing methods in StringsManager (useLocale)

### UI/Android-Specific Issues
- Missing Android-specific classes and methods (KeyEvent.KEYCODE_I, AndroidSAF methods)
- Missing PlayGames class
- Missing Ads-related methods
- Missing UI event handling methods
- Missing Keys.Key constants (BEGIN_OF_FRAME, END_OF_FRAME)
- Missing KeyEvent constants (ACTION_DOWN)
- Missing Touchscreen.processEvent method
- Missing AndroidSAF methods (pickDirectoryForModInstall, copyModToAppStorage, mBaseSrcPath)

### Graphics/Rendering Issues
- Missing methods in Texture classes
- Missing Gl.flush() method
- Missing Keys.Key constants
- Missing Touchscreen.processEvent method
- Missing GL20 interface method signatures (glGetProgramiv, glGetShaderiv)
- Missing BitmapData methods (eraseColor, getPixel, makeCircleMask)
- Missing MaskedTilemapScript methods

### Event Handling Issues
- Missing event processing methods (Keys.processEvent, Touchscreen.processEvent)
- Missing abstract method implementations (WndInstallingMod.onFileSelectionCancelled)

### Ads and Monetization Issues
- Missing Ads methods (isRewardVideoReady, removeEasyModeBanner, displayEasyModeBanner)
- Missing AdsRewardVideo method signatures (show method with parameters)

### Analytics and Event Collection Issues
- Missing EventCollector methods (logCountedEvent)

## Root Causes

1. The HTML platform implementation is missing many methods that exist in the Android/Desktop versions
2. The annotation processor is not generating the BundleHelper class
3. There are Android-specific references that don't exist in the HTML version
4. Some core game methods are not implemented in the HTML version
5. Missing UI event handling for the HTML platform
6. Incompatible method signatures between HTML and Desktop implementations
7. Missing abstract method implementations in HTML-specific classes

## Platform Abstraction Class with Most Errors

Based on the error analysis, **AdsUtilsCommon** errors have been successfully fixed by updating the HTML AdsUtils class with properly typed maps.

## Next Steps

1. Fix the BundleHelper generation issue
2. Implement missing methods in platform abstraction classes
3. Remove or stub Android-specific references
4. Add HTML-specific implementations for UI event handling
5. Implement missing graphics/texture methods
6. Fix method signature incompatibilities
7. Implement missing abstract methods

## Build Commands Tested

```
./gradlew -c settings.html.gradle :RemixedDungeonHtml:compileJava
./gradlew -c settings.html.gradle :RemixedDungeonHtml:compileGwt
./gradlew -c settings.html.gradle :RemixedDungeonHtml:gwtSuperDev
```

All commands fail with compilation errors during the `compileJava` phase.

## Required Dependencies

The build process requires:
- lxml Python package (successfully installed)
- GWT 2.8.2
- LibGDX dependencies for HTML backend

## Error Summary

The compilation errors can be grouped into these main categories:
1. Android-specific references (8 errors)
2. Platform-specific method implementations (7 errors)
3. Generic type incompatibilities (4 errors)
4. Missing abstract method implementations (3 errors)
5. Graphics and rendering interface incompatibilities (3 errors)
6. Event handling and input processing (2 errors)
7. Bundle and serialization issues (2 errors)
8. Constructor and type incompatibilities (2 errors)
9. UI/Window implementation issues (1 error)